# SPDX-FileCopyrightText:  PyPSA-Earth and PyPSA-Eur Authors
#
# SPDX-License-Identifier: CC0-1.0

version: 2

mkdocs:
  configuration: mkdocs.yml

build:
  os: "ubuntu-24.04"
  tools:
    python: "3.12"
  # We recommend using a requirements file for reproducible builds.
  # This is just a quick example to get started.
  # https://docs.readthedocs.io/page/guides/reproducible-builds.html

  apt_packages:
  - graphviz
  - glpk-utils
  - libglpk-dev

  jobs:
    pre_system_dependencies:
    - git fetch --force --all
    - git submodule update --init --recursive
    pre_install:
    - pip install mkdocs-material
    post_build:
    - mkdir -p doc/user-guide
    - snakemake -j 1 --dag visualize_data | dot -Tpng > doc/user-guide/workflow_dag.png

python:
  install:
  - requirements: doc/requirements.txt
